<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="NingBo"><meta name="description" conauthortent="宁勃的博客"><link rel="alternative" href="/atom.xml" title="I am NingBo" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>PostCSS-Comn使用说明 - I am NingBo</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><header class="head"><h1 class="head-title u-fl"><a href="/">I am NingBo</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2017-02-15T11:57:08.000Z">二月 15, 2017</time><h1 class="post__title"><a href="/2017/02/15/postCSS-Comn/">PostCSS-Comn使用说明</a></h1><div class="post__main echo"><h1 id="PostCSS-Comn"><a href="#PostCSS-Comn" class="headerlink" title="PostCSS-Comn"></a>PostCSS-Comn</h1><p>PostCSS-Comn使用说明，整合PostCSS常用功能<br>GitHub：<code>https://github.com/NalvyBoo/PostCSS-Comn</code></p>
<h2 id="插件作用"><a href="#插件作用" class="headerlink" title="插件作用"></a>插件作用</h2><ul>
<li>支持CSS未来语法</li>
<li>自动补全浏览器私有前缀</li>
<li>CSS预处理（整合Sass、LESS或Stylus功能，语法基本和Sass的相同）</li>
<li>通过@import，整合多个CSS文件</li>
<li>将相同的CSS媒体查询规则合并为一个</li>
<li>压缩CSS文件</li>
<li>给rgba颜色创建降级方案(添加备用颜色)</li>
<li>给opacity提供降级方案（给IE浏览器添加滤镜属性）</li>
<li>让IE8支持rem单位</li>
<li>将伪元素的<code>::</code>转换为<code>:</code>(IE8不支持<code>::</code>)</li>
</ul>
<h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><ol>
<li><a href="http://www.w3cplus.com/PostCSS/using-postcss-for-cross-browser-compatibility.html" target="_blank" rel="external">全局安装Gulp</a></li>
<li>复制<a href="https://github.com/NalvyBoo/PostCSS-Comn" target="_blank" rel="external">仓库文件</a>到项目目录（<code>PostCSS文件夹</code>内的内容）</li>
<li>命令终端运行：<code>npm install</code>（淘宝镜像使用该命令：<code>cnpm install</code>）</li>
<li><code>src文件夹</code> 为编辑源文件，<code>css文件夹</code> 为生成代码文件</li>
<li><code>src文件夹</code> 目录下命令终端运行：<code>gulp css</code></li>
<li><code>css文件夹</code> 内查看编译后结果</li>
</ol>
<h2 id="语法说明"><a href="#语法说明" class="headerlink" title="语法说明"></a>语法说明</h2><ul>
<li><a href="https://github.com/NalvyBoo/PostCSS-Comn/tree/master/precss" target="_blank" rel="external">PreCSS语法说明</a></li>
</ul>
<hr>
<h2 id="以下内容为自定义进阶"><a href="#以下内容为自定义进阶" class="headerlink" title="以下内容为自定义进阶"></a>以下内容为自定义进阶</h2><h2 id="PostCSS-Comn插件扩展"><a href="#PostCSS-Comn插件扩展" class="headerlink" title="PostCSS-Comn插件扩展"></a>PostCSS-Comn插件扩展</h2><p>以扩展<code>postcss-will-change</code>插件为例</p>
<p><strong>安装插件 项目目录下执行命令行</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install postcss-will-change --save-dev</div></pre></td></tr></table></figure>
<p><strong>配置<code>gulpfile.js</code>文件</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 添加此行</span></div><div class="line"><span class="keyword">var</span> will_change = <span class="built_in">require</span>(<span class="string">'postcss-will-change'</span>);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'css'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </div><div class="line">	<span class="keyword">var</span> processors = [</div><div class="line">		<span class="comment">// 添加此行</span></div><div class="line">		will_change</div><div class="line">	]; </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><strong>完成 执行命令查看效果</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp css</div></pre></td></tr></table></figure></p>
<h2 id="PostCSS配置与命令"><a href="#PostCSS配置与命令" class="headerlink" title="PostCSS配置与命令"></a>PostCSS配置与命令</h2><p><strong>淘宝镜像npm<code>cnpm</code>（写命令时，将<code>npm</code>换成<code>cnpm</code>，其他与npm语法相同）</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install cnpm -g --registry=https://registry.npm.taobao.org</div></pre></td></tr></table></figure></p>
<p><strong>全局安装<code>gulp</code></strong><br>如果之前有安装过一个全局版本的 gulp，请执行一下<code>npm rm --global gulp</code>来避免和<code>gulp-cli</code>冲突</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cnpm install --global gulp-cli</div></pre></td></tr></table></figure>
<p><strong>项目安装<code>gulp</code>（项目根目录下）</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cnpm install --save-dev gulp</div></pre></td></tr></table></figure></p>
<p><strong>配置<code>package.json</code>文件</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&#123; </div><div class="line">	<span class="attr">"name"</span>: <span class="string">"PostCSS-Comn"</span>, </div><div class="line">	<span class="attr">"version"</span>: <span class="string">"0.0.1"</span>, </div><div class="line">	<span class="attr">"description"</span>: <span class="string">"PostCSS gulp plugin"</span>, </div><div class="line">	<span class="attr">"keywords"</span>: [ </div><div class="line">		<span class="string">"gulpplugin"</span>, </div><div class="line">		<span class="string">"PostCSS"</span>, </div><div class="line">		<span class="string">"css"</span> </div><div class="line">	], </div><div class="line">	<span class="attr">"author"</span>: <span class="string">"ningbo"</span>, </div><div class="line">	<span class="attr">"license"</span>: <span class="string">"MIT"</span>, </div><div class="line">	<span class="attr">"dependencies"</span>: &#123; </div><div class="line">		<span class="attr">"postcss"</span>: <span class="string">"^5.0.0"</span>, </div><div class="line">		<span class="attr">"gulp"</span>: <span class="string">"~3.8.10"</span> </div><div class="line">	&#125;, </div><div class="line">	<span class="attr">"devDependencies"</span>: &#123; </div><div class="line">		<span class="attr">"gulp-postcss"</span>: <span class="string">"^6.0.1"</span> </div><div class="line">	&#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>安装<code>gulp-postcss</code>（项目根目录下）</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cnpm install --save-dev gulp-postcss</div></pre></td></tr></table></figure></p>
<p><strong>配置<code>gulpfile.js</code>文件，<code>src</code>文件为css编辑文件，<code>css</code>文件为编译生成文件</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> postcss = <span class="built_in">require</span>(<span class="string">'gulp-postcss'</span>);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'css'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </div><div class="line">	<span class="keyword">var</span> processors = [</div><div class="line">	]; </div><div class="line">	<span class="keyword">return</span> gulp.src(<span class="string">'./src/*.css'</span>)</div><div class="line">	.pipe(postcss(processors))</div><div class="line">	.pipe(gulp.dest(<span class="string">'./css'</span>)); </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><strong>测试（在<code>src</code>中创建测试文件<code>style.css</code>）</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.test</span>&#123;</div><div class="line">	<span class="attribute">background</span>: black;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>测试运行命令，在<code>css</code>文件查看<code>style.css</code></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gulp css</div></pre></td></tr></table></figure>
<p><strong>添加PostCSS插件：<a href="https://github.com/postcss/autoprefixer" target="_blank" rel="external">Autoprefixer</a>(处理浏览器私有前缀)，<a href="http://cssnext.io/features/" target="_blank" rel="external">cssnext</a>(使用CSS未来的语法),<a href="https://github.com/jonathantneal/precss" target="_blank" rel="external">precss</a>(像Sass的函数)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ cnpm install autoprefixer --save-dev</div><div class="line">$ cnpm install cssnext --save-dev</div><div class="line">$ cnpm install precss --save-dev</div></pre></td></tr></table></figure>
<p><strong>配置<code>gulpfile.js</code>文件</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> autoprefixer = <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>); </div><div class="line"><span class="keyword">var</span> cssnext = <span class="built_in">require</span>(<span class="string">'cssnext'</span>); </div><div class="line"><span class="keyword">var</span> precss = <span class="built_in">require</span>(<span class="string">'precss'</span>);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> processors = [</div><div class="line">	autoprefixer,</div><div class="line">	cssnext,</div><div class="line">	precss</div><div class="line">];</div></pre></td></tr></table></figure>
<p><strong>运行命令，在<code>css</code>文件查看<code>style.css</code></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gulp css</div></pre></td></tr></table></figure>
<h2 id="PostCSS入门教程"><a href="#PostCSS入门教程" class="headerlink" title="PostCSS入门教程"></a>PostCSS入门教程</h2><p>source:<a href="http://www.w3cplus.co" target="_blank" rel="external">http://www.w3cplus.com</a></p>
<ul>
<li><a href="http://www.w3cplus.com/PostCSS/postcss-deep-dive-what-you-need-to-know.html" target="_blank" rel="external">PostCSS深入学习：你需要知道什么</a></li>
<li><a href="http://www.w3cplus.com/PostCSS/postcss-quickstart-guide-instant-setup-options.html" target="_blank" rel="external">PostCSS深入学习：设置选项</a></li>
<li><a href="http://www.w3cplus.com/PostCSS/postcss-quickstart-guide-gulp-setup.html" target="_blank" rel="external">PostCSS深入学习：Gulp设置</a></li>
<li><a href="http://www.w3cplus.com/PostCSS/postcss-quickstart-guide-grunt-setup.html" target="_blank" rel="external">PostCSS深入学习：Grunt配置</a></li>
<li><a href="http://www.w3cplus.com/PostCSS/postcss-quickstart-guide-exploring-plugins.html" target="_blank" rel="external">PostCSS深入学习: 管理插件</a></li>
<li><a href="http://www.w3cplus.com/PostCSS/using-postcss-for-cross-browser-compatibility.html" target="_blank" rel="external">PostCSS深入学习: 跨浏览器兼容性</a></li>
<li><a href="http://www.w3cplus.com/PostCSS/using-postcss-for-minification-and-optimization.html" target="_blank" rel="external">PostCSS深入学习: 压缩和优化CSS</a></li>
<li><a href="http://www.w3cplus.com/PostCSS/postcss-deep-dive-preprocessing-with-precss.html" target="_blank" rel="external">PostCSS深入学习: PreCSS的使用</a></li>
<li><a href="http://www.w3cplus.com/PostCSS/postcss-deep-dive-roll-your-own-preprocessor.html" target="_blank" rel="external">PostCSS深入学习: 定制自己的预处理器</a></li>
<li><a href="http://www.w3cplus.com/PostCSS/using-postcss-together-with-sass-stylus-or-less.html" target="_blank" rel="external">PostCSS深入学习: PostCSS和Sass、Stylus或LESS一起使用</a></li>
<li><a href="http://www.w3cplus.com/PostCSS/using-postcss-with-bem-and-suit-methodologies.html" target="_blank" rel="external">PostCSS深入学习: 结合BEM和SUIT方法使用PostCSS</a></li>
<li><a href="http://www.w3cplus.com/PostCSS/postcss-deep-dive-shortcuts-and-shorthand.html" target="_blank" rel="external">PostCSS深入学习: 简写和速写</a></li>
<li><a href="http://www.w3cplus.com/preprocessor/getting-started-with-postcss-a-quick-guide-for-sass-users.html" target="_blank" rel="external">PostCSS入门：Sass用户入门指南</a></li>
</ul>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ul>
<li><a href="http://codepen.io/" target="_blank" rel="external">CodePen</a></li>
<li><a href="https://prepros.io/" target="_blank" rel="external">Prepros</a></li>
</ul>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>插件列表：<a href="https://github.com/postcss/postcss#plugins" target="_blank" rel="external">Github</a> | <a href="http://postcss.parts/" target="_blank" rel="external">postcss.parts</a></p>
<p>常用插件：</p>
<ul>
<li><a href="http://cssnext.io/features/" target="_blank" rel="external">cssnext</a>：CSS未来语法</li>
<li><a href="https://github.com/postcss/autoprefixer" target="_blank" rel="external">Autoprefixer</a>：自动补全浏览器私有前缀</li>
<li><a href="https://github.com/jonathantneal/precss" target="_blank" rel="external">precss</a>：CSS预处理（整合Sass、LESS或Stylus功能，语法基本和Sass的相同）</li>
<li><a href="https://github.com/postcss/postcss-import" target="_blank" rel="external">postcss-import</a>：通过@import，整合多个CSS文件</li>
<li><a href="https://github.com/hail2u/node-css-mqpacker" target="_blank" rel="external">css-mqpacker</a>：将相同的CSS媒体查询规则合并为一个</li>
<li><a href="http://cssnano.co/" target="_blank" rel="external">cssnano</a>：压缩CSS文件</li>
<li><a href="https://github.com/postcss/postcss-color-rgba-fallback" target="_blank" rel="external">postcss-color-rgba-fallback</a>：给rgba颜色创建降级方案(添加备用颜色)</li>
<li><a href="https://github.com/iamvdo/postcss-opacity" target="_blank" rel="external">postcss-opacity</a>：给opacity提供降级方案（给IE浏览器添加滤镜属性）</li>
<li><a href="https://github.com/robwierzbowski/node-pixrem" target="_blank" rel="external">node-pixrem</a>：让IE8支持rem单位</li>
<li><a href="https://github.com/axa-ch/postcss-pseudoelements" target="_blank" rel="external">postcss-pseudoelements</a>：将伪元素的<code>::</code>转换为<code>:</code>(IE8不支持<code>::</code>)</li>
</ul>
</div></header></article><section class="reward"> <a class="btn-reward" href="#">打赏</a><div class="reward-wrapper clearfix"><img src="/img/wechat.png" title="微信"></div></section><div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC8zMDA5Mi82NjQ3"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2017-2018 NingBo</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>